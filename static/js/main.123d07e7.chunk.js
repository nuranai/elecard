(this.webpackJsonpelecard=this.webpackJsonpelecard||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a,c=n(1),r=n.n(c),s=n(5),i=n.n(s),l=n(2),o=n(4),d=n(8),j=n.n(d),u=n(10),b=n(3),m={cardElements:JSON.parse(null!==(a=localStorage.elemets)&&void 0!==a?a:"[]"),elements:[],loading:!1,error:null,categories:[]};function g(e){localStorage.elemets=JSON.stringify(e)}var p=Object(b.b)("catalog/fetchCatalog",Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://contest.elecard.ru/frontend_data/catalog.json");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(0),Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),O=Object(b.c)({name:"catalog",initialState:m,reducers:{sortElements:function(e,t){e.cardElements.sort((function(e,n){return e[t.payload.sortType]<n[t.payload.sortType]?"ascend"===t.payload.sortDirection?-1:1:e[t.payload.sortType]>n[t.payload.sortType]?"ascend"===t.payload.sortDirection?1:-1:0}))},deleteElement:function(e,t){var n=e.cardElements.findIndex((function(e){return e.image===t.payload}));e.cardElements.splice(n,1),g(e.cardElements)},resetCards:function(e,t){e.cardElements=e.elements,g(e.elements)}},extraReducers:function(e){e.addCase(p.pending,(function(e,t){e.loading=!0,e.error=null})).addCase(p.fulfilled,(function(e,t){e.elements=t.payload,e.loading=!1,e.cardElements[0]||(e.cardElements=e.elements),e.categories=Array.from(t.payload.reduce((function(e,t){return e.add(t.category)}),new Set))})).addCase(p.rejected,(function(e,t){e.loading=!1,e.error=t.error.message}))}}),h=O.reducer,x=O.actions,f=x.sortElements,v=x.deleteElement,y=x.resetCards,C=n(0);function _(){return Object(C.jsx)("div",{className:"spinner_background",children:Object(C.jsx)("div",{className:"spinner_wrapper",children:Object(C.jsx)("div",{className:"spinner"})})})}var N=n(11),k=n.n(N);function w(e){var t=e.element,n=Object(l.b)();return Object(C.jsxs)("li",{className:"card",children:[Object(C.jsx)("button",{onClick:function(){return n(v(t.image))},children:"X"}),Object(C.jsx)("img",{src:"http://contest.elecard.ru/frontend_data/".concat(t.image),alt:t.image}),Object(C.jsxs)("p",{children:["Image name: ",t.image]}),Object(C.jsxs)("p",{children:["Image Date: ",new Date(t.timestamp).toUTCString()]}),Object(C.jsxs)("p",{children:["Image Size: ",t.filesize]})]})}function E(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(l.b)(),s=Object(l.c)((function(e){return e.catalog}));return Object(c.useEffect)((function(){r(p())}),[]),Object(C.jsxs)("div",{className:"page_wrapper",children:[s.loading?Object(C.jsx)(_,{}):null,Object(C.jsx)("ul",{className:"card_wrapper",children:s.cardElements.slice(n,n+50).map((function(e,t){return Object(C.jsx)(w,{element:e},t)}))}),Object(C.jsx)(k.a,{onPageChange:function(e){var t=e.selected;a(50*t),console.log(50*t)},pageCount:s.elements.length/50,containerClassName:"pagination__container",pageLinkClassName:"pagination__page",activeLinkClassName:"pagination__active",nextLinkClassName:"pagination__page pagination__button",previousLinkClassName:"pagination__page pagination__button",breakLinkClassName:"pagination__page"})]})}var S=Object(b.c)({name:"view",initialState:"card",reducers:{changeView:function(e,t){return t.payload}}}),F=S.reducer,D=S.actions.changeView;function T(){var e=Object(l.b)();return Object(C.jsxs)("header",{children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("input",{onChange:function(t){return e(D(t.target.value))},id:"card",type:"radio",name:"view_type",value:"card",defaultChecked:!0}),Object(C.jsx)("label",{htmlFor:"card",children:"Card"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("input",{onChange:function(t){return e(D(t.target.value))},id:"tree",type:"radio",name:"view_type",value:"tree"}),Object(C.jsx)("label",{htmlFor:"tree",children:"Tree"})]})]})}function L(){var e=Object(c.useState)("image"),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("ascend"),s=Object(o.a)(r,2),i=s[0],d=s[1],j=Object(l.c)((function(e){return e.view})),u=Object(l.b)();Object(c.useEffect)((function(){u(f({sortType:n,sortDirection:i}))}),[n,i]);var b=function(e){return a((function(t){return e.target.value}))},m=function(e){return d(e.target.value)};return Object(C.jsx)("footer",{children:"card"===j?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("span",{children:"Sort Type:"}),Object(C.jsx)("input",{onChange:b,id:"name",type:"radio",name:"sort-type",value:"image",checked:"image"===n}),Object(C.jsx)("label",{htmlFor:"name",children:"Name"}),Object(C.jsx)("input",{onChange:b,id:"date",type:"radio",name:"sort-type",value:"timestamp"}),Object(C.jsx)("label",{htmlFor:"date",children:"Date"}),Object(C.jsx)("input",{onChange:b,id:"category",type:"radio",name:"sort-type",value:"category"}),Object(C.jsx)("label",{htmlFor:"category",children:"Category"}),Object(C.jsx)("input",{onChange:b,id:"size",type:"radio",name:"sort-type",value:"filesize"}),Object(C.jsx)("label",{htmlFor:"size",children:"Size"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("span",{children:"Sort Direction:"}),Object(C.jsx)("input",{onChange:m,id:"ascend",type:"radio",name:"sort-dir",value:"ascend",checked:"ascend"===i}),Object(C.jsx)("label",{htmlFor:"ascend",children:"Ascending"}),Object(C.jsx)("input",{onChange:m,id:"descend",type:"radio",name:"sort-dir",value:"descend"}),Object(C.jsx)("label",{htmlFor:"descend",children:"Descending"})]}),Object(C.jsx)("button",{onClick:function(){u(y()),a("image"),d("ascend")},children:"Reset"})]}):null})}n(25);function z(e){var t=e.url,n=Object(c.useState)(!1),a=Object(o.a)(n,2),r=a[0],s=a[1],i=function(){s(!r)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("img",{className:"thumbnail",src:t,onClick:i,alt:"thumbnail"}),r?Object(C.jsxs)("div",{className:"modal_content",onClick:i,children:[Object(C.jsx)("h1",{className:"modal_close",children:"X"}),Object(C.jsx)("img",{className:"full_img",src:t,alt:"full"})]}):null]})}function I(e){var t=e.category,n=e.treeBranchHandler,a=Object(l.c)((function(e){return e.catalog}));return Object(C.jsxs)("li",{children:[Object(C.jsx)("span",{onClick:n,className:"carrier",children:t}),Object(C.jsx)("ul",{className:"nested",children:a.elements.filter((function(e){return e.category===t})).map((function(e,t){return Object(C.jsx)("li",{children:Object(C.jsx)(z,{url:"http://contest.elecard.ru/frontend_data/".concat(e.image)})},t)}))})]})}function J(){var e=Object(l.c)((function(e){return e.catalog})),t=function(e){e.target.classList.toggle("carrier_active"),e.target.nextElementSibling.classList.toggle("active")};return Object(C.jsx)("div",{className:"page_wrapper",children:Object(C.jsx)("ul",{className:"tree_root",children:Object(C.jsxs)("li",{children:[Object(C.jsx)("span",{onClick:t,className:"carrier",children:"Catalog:"}),Object(C.jsx)("ul",{className:"nested",children:e.categories.map((function(e){return Object(C.jsx)(I,{category:e,treeBranchHandler:t},e)}))})]})})})}var B=function(){var e=Object(l.c)((function(e){return e.view}));return Object(C.jsxs)("div",{children:[Object(C.jsx)(T,{}),"card"===e?Object(C.jsx)(E,{}):Object(C.jsx)(J,{}),Object(C.jsx)(L,{})]})},A=Object(b.a)({reducer:{catalog:h,view:F}});i.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(l.a,{store:A,children:Object(C.jsx)(B,{})})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.123d07e7.chunk.js.map